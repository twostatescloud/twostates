Math.seedrandom();function loadscript(b,c){var a=document.createElement("script");a.src=b+"&alt=json-in-script&callback="+c;a.type="text/javascript";document.body.parentNode.appendChild(a)}function load_playlist(a){loadscript(a+"&max-results=50","showPlayList")}function load(){}var loading_playlist=1;var next_video;var videos=[];var video_meta={};var related_timer;function showPlayList(f){var q=f.feed;var a;if("title" in q){a=q.title.$t}var k=q.entry||[];for(var g=0;g<k.length;g++){var o=k[g];var n=o.title.$t;var b=o.media$group.yt$videoid.$t;var p=undefined;for(var d=0;d<o.link.length;d++){var m=o.link[d];if(m.rel=="http://gdata.youtube.com/schemas/2007#video.related"){p=m.href;break}}var h;try{h=o.app$control.yt$state.$t}catch(l){}videos.push(b);video_meta[b]={title:n,related:p,error_reason:h,list_title:a}}for(var d=0;d<q.link.length;d++){var m=q.link[d];if(m.rel=="next"){progress_message(document.createTextNode("Loading more parts..."));progress_message(document.createElement("br"));setTimeout('loadscript("'+m.href+'", "showPlayList")',1000);return}}if(loading_playlist<playlisturls.length){loading_playlist++;progress_message(document.createTextNode("Loading playlist "+loading_playlist+"..."));progress_message(document.createElement("br"));setTimeout('load_playlist("'+playlisturls[loading_playlist-1]+'")',1000);return}var c=document.getElementById("video");if(c){while(c.firstChild){c.removeChild(c.firstChild)}}var r=document.getElementById("control_buttons");if(r){r.style.display=""}else{progress_message(document.createTextNode("Ready."));progress_message(document.createElement("br"));progress_message(document.createElement("br"))}if(videos.length==0){alert("There are no videos in this playlist. They may have been removed by Youtube.");return}randomize_videos();document.getElementById("nextbutton").focus();next(embed&&!autoplay);update_playlist()}function update_playlist(){var a=document.getElementById("current_playlist");if(a){var c="";for(var b=0;b<videos.length;++b){var d=video_meta[videos[b]];c+='<a href="#" onclick="jump_to_video('+b+');return false">'+d.title+"</a>"+(d.list_title?" ("+d.list_title+")":"")+"<br/><br/>"}a.innerHTML=c}}function jump_to_video(a){next_video=a;next();document.getElementById("nextbutton").focus()}function randomize_videos(){videos=shuffle(videos);next_video=0}function shuffle(d){var a,c,b=d.length;if(b){while(--b){c=Math.floor(Math.random()*(b+1));a=d[c];d[c]=d[b];d[b]=a}}return d}function onYouTubePlayerReady(a){load_playlist(playlisturls[0])}function onytplayerStateChange(a){if(a.data==YT.PlayerState.ENDED){if(is_playlist_paused()){ytplayer.playVideo(0)}else{setTimeout("next()",1000)}}}function onytplayerError(a){setTimeout("next()",1000);insert_unplayable()}function next(a){if(next_video==videos.length){if(document.getElementById("repeatplaylist").checked){reshuffle()}else{alert("No more videos in playlist. Try the Reshuffle button.")}return}document.getElementById("previousbutton").disabled=next_video==0;var c=videos[next_video++];try{if(a){ytplayer.cueVideoById(c)}else{ytplayer.loadVideoById(c)}}catch(b){next_video--;onytplayerError()}document.getElementById("videotitle").innerHTML=video_meta[c].title;document.getElementById("videosleft").innerHTML="("+(videos.length-next_video)+" more)";document.getElementById("pauseplaylist").innerHTML=pause_playlist_text;document.getElementById("nextvideo").innerHTML="Next: "+(next_video==videos.length?"-":video_meta[videos[next_video]].title);document.title=video_meta[c].title;if(embed){return}if(video_meta[c].related){document.getElementById("related").innerHTML="loading...";clearTimeout(related_timer);related_timer=setTimeout('loadscript("'+video_meta[c].related+'", "show_related")',5000)}else{document.getElementById("related").innerHTML="No related videos"}}function previous(){next_video-=2;next()}function reshuffle(){randomize_videos();next();update_playlist()}function is_playlist_paused(){return document.getElementById("pauseplaylist").innerHTML!=pause_playlist_text}function pause_playlist(){document.getElementById("pauseplaylist").innerHTML=(is_playlist_paused()?pause_playlist_text:"Resume playlist")}function show_related(e){var n=e.feed;var g=n.entry||[];var h="";for(var f=0;f<g.length;f++){var m=g[f];var l=m.title.$t;var c=m.media$group.yt$videoid.$t;var b;if(c in video_meta){continue}for(var d=0;d<m.link.length;d++){var k=m.link[d];if(k.rel=="alternate"){b=k.href;break}}var a=m.media$group.media$content;if(!a){continue}var k='<a href="'+b+'" onclick="ytplayer.stopVideo()" target="_blank">';h+=k+l+"</a> ("+seconds_to_minutes(a[0].duration)+")<br/><br/>"+k+'<img src="'+m.media$group.media$thumbnail[0].url+'"/></a><br/><br/>'}document.getElementById("related").innerHTML=h}function seconds_to_minutes(a){var b=Math.floor(a/60);a=a%60;return(b<10?"0"+b:b)+":"+(a<10?"0"+a:a)}function insert_unplayable(){insert_unplayable_into_view(video_meta[videos[next_video-1]])}function progress_message(b){var a=document.getElementById("video");if(a){a.appendChild(b)}};
